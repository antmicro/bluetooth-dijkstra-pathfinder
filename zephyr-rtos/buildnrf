#/bin/bash

# build from source files 
west build -b nrf52840dongle_nrf52840 /home/js/Projects/engineering-thesis/zephyr-rtos

# package app for nrfutil
nrfutil pkg generate --hw-version 52 --sd-req=0x00 \
        --application build/zephyr/zephyr.hex \
        --application-version 1 mesh_communication.zip

# flash 
if [[ "$1" == "-f" ]]
then
    echo Flashing the board...
    sudo chmod 777 /dev/ttyACM0
    nrfutil dfu usb-serial -pkg mesh_communication.zip -p /dev/ttyACM0
fi

